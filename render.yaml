# ==========================================
# ğŸš€ UltimateAI IDE â€” Render Deployment (Root-Level)
# ==========================================
services:
  # ===============================
  # ğŸŒ Web App (Streamlit Frontend)
  # ===============================
  - type: web
    name: ultimateai-ide
    env: python
    plan: free
    autoDeploy: true

    buildCommand: |
      echo "ğŸš€ Upgrading pip..."
      pip install --upgrade pip

      echo "ğŸ“¦ Installing dependencies..."
      pip install -r requirements.txt

      echo "âœ… Build complete."

    startCommand: |
      echo "ğŸŒ Launching UltimateAI IDE..."
      streamlit run app.py --server.port $PORT --server.address 0.0.0.0

    envVars:
      - key: PYTHON_VERSION
        value: 3.12.4
      - key: OPENAI_API_KEY
        sync: false

  # ===============================
  # âš™ï¸ Background Worker (Optional)
  # ===============================
  - type: worker
    name: ultimateai-ide-worker
    env: python
    plan: free
    autoDeploy: true
    buildCommand: |
      echo "ğŸš€ Installing worker dependencies..."
      pip install --upgrade pip
      pip install -r requirements.txt
    startCommand: |
      echo "âš™ï¸ Background worker running (for queued jobs or training loops)..."
      python worker.py
    envVars:
      - key: PYTHON_VERSION
        value: 3.12.4
      - key: OPENAI_API_KEY
        sync: false

